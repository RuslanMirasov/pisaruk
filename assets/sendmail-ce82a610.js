(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function d(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=d(n);fetch(n.href,l)}})();const D=document.querySelector(".preloader");window.addEventListener("load",B);function B(){setTimeout(function(){D.classList.add("is--hidden")},300)}document.addEventListener("DOMContentLoaded",h=>{const u=document.querySelectorAll("[data-animation]");window.addEventListener("scroll",()=>{d()});function d(){u.forEach(a=>{const l=a.getBoundingClientRect().top+a.offsetHeight;l>50||l>50?a.style.backgroundColor="green":a.style.backgroundColor="tomato",console.log(`${l}`)})}d()});document.addEventListener("DOMContentLoaded",h=>{const u=document.querySelectorAll(".js-film-hover"),d=document.querySelectorAll(".poster");u.forEach(s=>{s.addEventListener("mouseover",l),s.addEventListener("mouseout",a),s.addEventListener("touchstart",l),s.addEventListener("touchend",n)});function a(){d.forEach(s=>{s.classList.remove("active")})}function n(){const s=this.dataset.id;d.forEach(p=>{p.dataset.id!==s&&p.classList.remove("active")})}function l(){const s=this.dataset.id;d.forEach(p=>{p.dataset.id===s?p.classList.add("active"):p.classList.remove("active")})}});document.addEventListener("DOMContentLoaded",h=>{const u=document.querySelectorAll("[data-menu-open]"),d=document.querySelector(".menu-backdrop"),a=document.querySelector(".burger"),n=document.querySelector(".body");u.forEach(s=>{s.addEventListener("click",l)});function l(){d.classList.toggle("is-open"),a.classList.toggle("is-open"),n.classList.toggle("lock")}});new Swiper(".heroSwiper",{effect:"fade",centeredSlides:!0,slidesPerView:"auto",allowTouchMove:!1,loop:!0,speed:2e3,autoplay:{delay:2e3}});document.addEventListener("DOMContentLoaded",h=>{const u=document.querySelectorAll(".form"),d=document.querySelectorAll("input, textarea"),a=document.querySelectorAll(".agree"),n=3,l="Минимум символа!",s="Заполните поле",p="Найдены цифры в имени!",M="Не верный формат E-mail!",T="Не верный формат телефона!",w="Минимальное к-во символов:",_="Максимальное к-во символов:",C=document.querySelectorAll("[data-popup]"),x=document.querySelectorAll("[data-popup-close]"),N=document.querySelectorAll(".modal"),S=document.querySelector(".backdrop"),H=[].filter.call(document.all,t=>getComputedStyle(t).position=="fixed"),v=document.querySelector(".body");let g=window.innerWidth-document.querySelector(".main").offsetWidth,b=["request","Заявка","Отправить заявку","Заполните форму и мы свяжемся <br>с вами в ближайшее время.","Отправить"];window.addEventListener("resize",I);function I(){g=window.innerWidth-document.querySelector(".main").offsetWidth}d.forEach(t=>{let o=t.closest(".label");(t.type==="checkbox"||t.type==="radio")&&(o=t.closest(".fieldset")),t.addEventListener("focus",function(){o.querySelectorAll(".red").forEach(r=>{r.classList.remove("red"),r.closest(".label").querySelector(".label__error")!==null&&(r.closest(".label").querySelector(".label__error").classList.remove("active"),setTimeout(function(){r.closest(".label").querySelector(".label__error").remove()},250))})}),t.addEventListener("blur",function(){this.value!==""&&E(o)===!0&&this.classList.add("valid")})}),a.forEach(t=>{t.addEventListener("change",function(){let o=!0,e=this.closest(".form").querySelectorAll(".agree"),r=e.length,c=0;e.forEach(f=>{f.checked&&c++}),r==c&&(o=!1),this.closest(".form").querySelector("[type=submit]").disabled=o})}),u.forEach(t=>{t.addEventListener("submit",async function(o){if(o.preventDefault(),E(this)!=!1){L("loading");const r=new FormData(this);let c={};r.forEach((i,m)=>c[m]=i);let f=JSON.stringify(c);setTimeout(function(){L("ok"),q(),console.log(f)},1500)}return!1})});function E(t){let o=!0;return t.querySelectorAll("[required]").forEach(e=>{let r=e.parentNode;if(e.value.length===0)c(r,s);else if(e.value.length<n&&e.type!=="number"){let i=l.split(" ");c(r,i[0]+" "+n+" "+i[1])}else e.name=="name"&&/[^A-zА-яЁё\+ ()\-]/.test(e.value)&&c(r,p),e.type=="email"&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e.value)&&c(r,M),e.type=="tel"&&/[^0-9\+ ()\-]/.test(e.value)&&c(r,T),e.type=="number"&&(e.min&&Number(e.value)<Number(e.min)&&c(r,w+" "+e.min),e.max&&Number(e.value)>Number(e.max)&&c(r,_+" "+e.max));if(e.type=="checkbox"&&!e.checked&&f(),e.type=="radio"&&!e.checked){const i=t.querySelectorAll('[name="'+e.name+'"]');let m=!1;for(let y=0;y<i.length;y++)if(i[y].checked===!0){m=!0;break}m===!1&&f()}function c(i,m){i.querySelectorAll(".label__error").length<1&&(i.insertAdjacentHTML("beforeend",'<div class="label__error">'+m+"</div>"),setTimeout(function(){i.querySelector(".label__error").classList.add("active")},5)),f()}function f(){e.classList.add("red"),o=!1}}),o}function q(){u.forEach(t=>{t.reset(),t.querySelectorAll(".label__error").forEach(o=>{o.classList.remove("active"),setTimeout(function(){o.remove()},250)}),t.querySelectorAll("[required]").forEach(o=>{o.classList.remove("red"),o.classList.remove("valid")}),t.querySelectorAll(".agree").length>0&&(t.querySelector("[type=submit]").disabled=!0)})}C.forEach(t=>{t.addEventListener("click",function(o){o.preventDefault();let e=this.dataset.popup.split("|");L(e[0],e[1],e[2],e[3],e[4])})}),x.forEach(t=>{t.addEventListener("click",O)});function L(t,o,e,r,c){let f=0;if(A(),S.classList.contains("is-hidden")&&(S.classList.remove("is-hidden"),k()),t=="request"){const i=document.querySelector("#request .subject"),m=document.querySelector("#request .popup-title"),y=document.querySelector("#request .popup-subtitle"),P=document.querySelector('#request .button[type="submit"]');i!==null&&(o!=null?document.querySelector("#request .subject").value=o:document.querySelector("#request .subject").value=b[1]),m!==null&&(e!=null?document.querySelector("#request .popup-title").innerHTML=e:document.querySelector("#request .popup-title").innerHTML=b[2]),y!==null&&(r!=null?document.querySelector("#request .popup-subtitle").innerHTML=r:document.querySelector("#request .popup-subtitle").innerHTML=b[3]),P!==null&&(c!=null?document.querySelector('#request .button[type="submit"]').innerHTML=c:document.querySelector('#request .button[type="submit"]').innerHTML=b[4])}else if(t=="video"&&o!=""){document.getElementById("loading").classList.remove("is-hidden"),f=1e3;let i=o.split("/");const m=i.length-1,y=`<iframe src='https://player.vimeo.com/video/${i[m]}' frameborder='0' allowfullscreen></iframe>`;document.querySelector(".vimeoIframe").insertAdjacentHTML("beforeend",y)}setTimeout(function(){document.getElementById(t).classList.remove("is-hidden")},f)}function A(){document.querySelector(".vimeoIframe").innerHTML="",N.forEach(t=>{t.classList.add("is-hidden"),setTimeout(function(){t.scrollTo({top:0,left:0,behavior:"auto"})},300)})}function O(){A(),S.classList.add("is-hidden"),setTimeout(function(){k(),q()},300)}function k(){v.classList.toggle("lock"),H.forEach(t=>{v.classList.contains("lock")?(v.style.paddingRight=g+"px",t.style.paddingRight=g+"px"):(v.style.paddingRight="0px",t.style.paddingRight="0px")})}});
