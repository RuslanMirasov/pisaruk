(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function u(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(o){if(o.ep)return;o.ep=!0;const n=u(o);fetch(o.href,n)}})();const D=document.querySelector(".preloader");window.addEventListener("load",B);function B(){setTimeout(function(){D.classList.add("is--hidden")},300)}document.addEventListener("DOMContentLoaded",h=>{const a=document.querySelectorAll("[data-animation]"),u=150;let d=window.innerHeight;window.addEventListener("scroll",()=>{d=window.innerHeight,o()}),window.addEventListener("load",()=>{setTimeout(function(){o()},300)});function o(){a.forEach(n=>{const s=n.dataset.repeat,f=n.getBoundingClientRect().top;f+n.offsetHeight>u&&f<d-u?n.classList.add("animate"):s!==void 0&&n.classList.remove("animate")})}});document.addEventListener("DOMContentLoaded",h=>{const a=document.querySelectorAll(".js-film-hover"),u=document.querySelectorAll(".poster");a.forEach(s=>{s.addEventListener("mouseover",n),s.addEventListener("mouseout",d),s.addEventListener("touchstart",n),s.addEventListener("touchend",o)});function d(){u.forEach(s=>{s.classList.remove("active")})}function o(){const s=this.dataset.id;u.forEach(f=>{f.dataset.id!==s&&f.classList.remove("active")})}function n(){const s=this.dataset.id;u.forEach(f=>{f.dataset.id===s?f.classList.add("active"):f.classList.remove("active")})}});document.addEventListener("DOMContentLoaded",h=>{const a=document.querySelectorAll("[data-menu-open]"),u=document.querySelector(".menu-backdrop"),d=document.querySelector(".burger"),o=document.querySelector(".body");a.forEach(s=>{s.addEventListener("click",n)});function n(){u.classList.toggle("is-open"),d.classList.toggle("is-open"),o.classList.toggle("lock")}});new Swiper(".heroSwiper",{effect:"fade",centeredSlides:!0,slidesPerView:"auto",allowTouchMove:!1,loop:!0,speed:2e3,autoplay:{delay:2e3}});document.addEventListener("DOMContentLoaded",h=>{const a=document.querySelectorAll(".form"),u=document.querySelectorAll("input, textarea"),d=document.querySelectorAll(".agree"),o=3,n="Минимум символа!",s="Заполните поле",f="Найдены цифры в имени!",E="Не верный формат E-mail!",T="Не верный формат телефона!",k="Минимальное к-во символов:",_="Максимальное к-во символов:",H=document.querySelectorAll("[data-popup]"),x=document.querySelectorAll("[data-popup-close]"),C=document.querySelectorAll(".modal"),b=document.querySelector(".backdrop"),N=[].filter.call(document.all,t=>getComputedStyle(t).position=="fixed"),v=document.querySelector(".body");let S=window.innerWidth-document.querySelector(".main").offsetWidth,L=["request","Заявка","Отправить заявку","Заполните форму и мы свяжемся <br>с вами в ближайшее время.","Отправить"];window.addEventListener("resize",I);function I(){S=window.innerWidth-document.querySelector(".main").offsetWidth}u.forEach(t=>{let r=t.closest(".label");(t.type==="checkbox"||t.type==="radio")&&(r=t.closest(".fieldset")),t.addEventListener("focus",function(){r.querySelectorAll(".red").forEach(l=>{l.classList.remove("red"),l.closest(".label").querySelector(".label__error")!==null&&(l.closest(".label").querySelector(".label__error").classList.remove("active"),setTimeout(function(){l.closest(".label").querySelector(".label__error").remove()},250))})}),t.addEventListener("blur",function(){this.value!==""&&q(r)===!0&&this.classList.add("valid")})}),d.forEach(t=>{t.addEventListener("change",function(){let r=!0,e=this.closest(".form").querySelectorAll(".agree"),l=e.length,c=0;e.forEach(m=>{m.checked&&c++}),l==c&&(r=!1),this.closest(".form").querySelector("[type=submit]").disabled=r})}),a.forEach(t=>{t.addEventListener("submit",async function(r){if(r.preventDefault(),q(this)!=!1){g("loading");const l=new FormData(this);let c={};l.forEach((i,p)=>c[p]=i);let m=JSON.stringify(c);setTimeout(function(){g("ok"),w(),console.log(m)},1500)}return!1})});function q(t){let r=!0;return t.querySelectorAll("[required]").forEach(e=>{let l=e.parentNode;if(e.value.length===0)c(l,s);else if(e.value.length<o&&e.type!=="number"){let i=n.split(" ");c(l,i[0]+" "+o+" "+i[1])}else e.name=="name"&&/[^A-zА-яЁё\+ ()\-]/.test(e.value)&&c(l,f),e.type=="email"&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e.value)&&c(l,E),e.type=="tel"&&/[^0-9\+ ()\-]/.test(e.value)&&c(l,T),e.type=="number"&&(e.min&&Number(e.value)<Number(e.min)&&c(l,k+" "+e.min),e.max&&Number(e.value)>Number(e.max)&&c(l,_+" "+e.max));if(e.type=="checkbox"&&!e.checked&&m(),e.type=="radio"&&!e.checked){const i=t.querySelectorAll('[name="'+e.name+'"]');let p=!1;for(let y=0;y<i.length;y++)if(i[y].checked===!0){p=!0;break}p===!1&&m()}function c(i,p){i.querySelectorAll(".label__error").length<1&&(i.insertAdjacentHTML("beforeend",'<div class="label__error">'+p+"</div>"),setTimeout(function(){i.querySelector(".label__error").classList.add("active")},5)),m()}function m(){e.classList.add("red"),r=!1}}),r}function w(){a.forEach(t=>{t.reset(),t.querySelectorAll(".label__error").forEach(r=>{r.classList.remove("active"),setTimeout(function(){r.remove()},250)}),t.querySelectorAll("[required]").forEach(r=>{r.classList.remove("red"),r.classList.remove("valid")}),t.querySelectorAll(".agree").length>0&&(t.querySelector("[type=submit]").disabled=!0)})}H.forEach(t=>{t.addEventListener("click",function(r){r.preventDefault();let e=this.dataset.popup.split("|");g(e[0],e[1],e[2],e[3],e[4])})}),x.forEach(t=>{t.addEventListener("click",O)});function g(t,r,e,l,c){let m=0;if(A(),b.classList.contains("is-hidden")&&(b.classList.remove("is-hidden"),M()),t=="request"){const i=document.querySelector("#request .subject"),p=document.querySelector("#request .popup-title"),y=document.querySelector("#request .popup-subtitle"),P=document.querySelector('#request .button[type="submit"]');i!==null&&(r!=null?document.querySelector("#request .subject").value=r:document.querySelector("#request .subject").value=L[1]),p!==null&&(e!=null?document.querySelector("#request .popup-title").innerHTML=e:document.querySelector("#request .popup-title").innerHTML=L[2]),y!==null&&(l!=null?document.querySelector("#request .popup-subtitle").innerHTML=l:document.querySelector("#request .popup-subtitle").innerHTML=L[3]),P!==null&&(c!=null?document.querySelector('#request .button[type="submit"]').innerHTML=c:document.querySelector('#request .button[type="submit"]').innerHTML=L[4])}else if(t=="video"&&r!=""){document.getElementById("loading").classList.remove("is-hidden"),m=1e3;let i=r.split("/");const p=i.length-1,y=`<iframe src='https://player.vimeo.com/video/${i[p]}' frameborder='0' allowfullscreen></iframe>`;document.querySelector(".vimeoIframe").insertAdjacentHTML("beforeend",y)}setTimeout(function(){document.getElementById(t).classList.remove("is-hidden")},m)}function A(){document.querySelector(".vimeoIframe").innerHTML="",C.forEach(t=>{t.classList.add("is-hidden"),setTimeout(function(){t.scrollTo({top:0,left:0,behavior:"auto"})},300)})}function O(){A(),b.classList.add("is-hidden"),setTimeout(function(){M(),w()},300)}function M(){v.classList.toggle("lock"),N.forEach(t=>{t.classList.contains("header")||(v.classList.contains("lock")?(v.style.paddingRight=S+"px",t.style.paddingRight=S+"px"):(v.style.paddingRight="0px",t.style.paddingRight="0px"))})}});
