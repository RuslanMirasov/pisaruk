(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const v=document.querySelector(".preloader");window.addEventListener("load",L);function L(){setTimeout(function(){v.classList.add("is--hidden")},400)}const q=document.querySelectorAll("[data-menu-open]"),E=document.querySelector(".menu-backdrop"),k=document.querySelector(".burger"),A=document.querySelector(".body");q.forEach(t=>{t.addEventListener("click",T)});function T(){E.classList.toggle("is-open"),k.classList.toggle("is-open"),A.classList.toggle("lock")}new Swiper(".heroSwiper",{effect:"fade",centeredSlides:!0,slidesPerView:"auto",allowTouchMove:!1,loop:!0,speed:2e3,autoplay:{delay:5e3}});const y=document.querySelectorAll(".form"),w=document.querySelectorAll("input, textarea"),_=document.querySelectorAll(".agree"),p=3,M="Минимум символа!",x="Заполните поле",N="Найдены цифры в имени!",H="Не верный формат E-mail!",C="Не верный формат телефона!",I="Минимальное к-во символов:",z="Максимальное к-во символов:",P=document.querySelectorAll("[data-popup]"),B=document.querySelectorAll("[data-popup-close]"),D=document.querySelectorAll(".modal"),d=document.querySelector(".backdrop"),W=[].filter.call(document.all,t=>getComputedStyle(t).position=="fixed"),u=document.querySelector(".body");let f=window.innerWidth-document.querySelector(".main").offsetWidth,a=["request","Заявка","Отправить заявку","Заполните форму и мы свяжемся <br>с вами в ближайшее время.","Отправить"];window.addEventListener("resize",O);function O(){f=window.innerWidth-document.querySelector(".main").offsetWidth}w.forEach(t=>{let l=t.closest(".label");(t.type==="checkbox"||t.type==="radio")&&(l=t.closest(".fieldset")),t.addEventListener("focus",function(){l.querySelectorAll(".red").forEach(n=>{n.classList.remove("red"),n.closest(".label").querySelector(".label__error")!==null&&(n.closest(".label").querySelector(".label__error").classList.remove("active"),setTimeout(function(){n.closest(".label").querySelector(".label__error").remove()},250))})}),t.addEventListener("blur",function(){this.value!==""&&h(l)===!0&&this.classList.add("valid")})});_.forEach(t=>{t.addEventListener("change",function(){let l=!0,e=this.closest(".form").querySelectorAll(".agree"),n=e.length,o=0;e.forEach(r=>{r.checked&&o++}),n==o&&(l=!1),this.closest(".form").querySelector("[type=submit]").disabled=l})});y.forEach(t=>{t.addEventListener("submit",async function(l){if(l.preventDefault(),h(this)!=!1){m("loading");const n=new FormData(this);let o={};n.forEach((s,c)=>o[c]=s);let r=JSON.stringify(o);setTimeout(function(){m("ok"),b(),console.log(r)},1500)}return!1})});function h(t){let l=!0;return t.querySelectorAll("[required]").forEach(e=>{let n=e.parentNode;if(e.value.length===0)o(n,x);else if(e.value.length<p&&e.type!=="number"){let s=M.split(" ");o(n,s[0]+" "+p+" "+s[1])}else e.name=="name"&&/[^A-zА-яЁё\+ ()\-]/.test(e.value)&&o(n,N),e.type=="email"&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e.value)&&o(n,H),e.type=="tel"&&/[^0-9\+ ()\-]/.test(e.value)&&o(n,C),e.type=="number"&&(e.min&&Number(e.value)<Number(e.min)&&o(n,I+" "+e.min),e.max&&Number(e.value)>Number(e.max)&&o(n,z+" "+e.max));if(e.type=="checkbox"&&!e.checked&&r(),e.type=="radio"&&!e.checked){const s=t.querySelectorAll('[name="'+e.name+'"]');let c=!1;for(let i=0;i<s.length;i++)if(s[i].checked===!0){c=!0;break}c===!1&&r()}function o(s,c){s.querySelectorAll(".label__error").length<1&&(s.insertAdjacentHTML("beforeend",'<div class="label__error">'+c+"</div>"),setTimeout(function(){s.querySelector(".label__error").classList.add("active")},5)),r()}function r(){e.classList.add("red"),l=!1}}),l}function b(){y.forEach(t=>{t.reset(),t.querySelectorAll(".label__error").forEach(l=>{l.classList.remove("active"),setTimeout(function(){l.remove()},250)}),t.querySelectorAll("[required]").forEach(l=>{l.classList.remove("red"),l.classList.remove("valid")}),t.querySelectorAll(".agree").length>0&&(t.querySelector("[type=submit]").disabled=!0)})}P.forEach(t=>{t.addEventListener("click",function(l){l.preventDefault();let e=this.dataset.popup.split("|");m(e[0],e[1],e[2],e[3],e[4])})});B.forEach(t=>{t.addEventListener("click",R)});function m(t,l,e,n,o){if(S(),d.classList.contains("is-hidden")&&(d.classList.remove("is-hidden"),g()),t=="request"){const r=document.querySelector("#request .subject"),s=document.querySelector("#request .popup-title"),c=document.querySelector("#request .popup-subtitle"),i=document.querySelector('#request .button[type="submit"]');r!==null&&(l!=null?document.querySelector("#request .subject").value=l:document.querySelector("#request .subject").value=a[1]),s!==null&&(e!=null?document.querySelector("#request .popup-title").innerHTML=e:document.querySelector("#request .popup-title").innerHTML=a[2]),c!==null&&(n!=null?document.querySelector("#request .popup-subtitle").innerHTML=n:document.querySelector("#request .popup-subtitle").innerHTML=a[3]),i!==null&&(o!=null?document.querySelector('#request .button[type="submit"]').innerHTML=o:document.querySelector('#request .button[type="submit"]').innerHTML=a[4])}else if(t=="video"&&l!=""){let r=l.split("/");const s=r.length-1,c=`<iframe src='https://player.vimeo.com/video/${r[s]}' frameborder='0' allowfullscreen></iframe>`;document.querySelector(".vimeoIframe").insertAdjacentHTML("beforeend",c)}document.getElementById(t).classList.remove("is-hidden")}function S(){document.querySelector(".vimeoIframe").innerHTML="",D.forEach(t=>{t.classList.add("is-hidden"),setTimeout(function(){t.scrollTo({top:0,left:0,behavior:"auto"})},300)})}function R(){S(),d.classList.add("is-hidden"),setTimeout(function(){g(),b()},300)}function g(){u.classList.toggle("lock"),W.forEach(t=>{u.classList.contains("lock")?(u.style.paddingRight=f+"px",t.style.paddingRight=f+"px"):(u.style.paddingRight="0px",t.style.paddingRight="0px")})}
