(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&m(s)}).observe(document,{childList:!0,subtree:!0});function f(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(n){if(n.ep)return;n.ep=!0;const l=f(n);fetch(n.href,l)}})();const D=document.querySelector(".preloader");window.addEventListener("load",z);function z(){setTimeout(function(){D.classList.add("is--hidden")},400)}document.addEventListener("DOMContentLoaded",b=>{const a=document.querySelectorAll(".js-film-hover"),f=document.querySelectorAll(".poster");a.forEach(s=>{s.addEventListener("mouseover",l),s.addEventListener("mouseout",m),s.addEventListener("touchstart",l),s.addEventListener("touchend",n)});function m(){f.forEach(s=>{s.classList.remove("active")})}function n(){const s=this.dataset.id;f.forEach(p=>{p.dataset.id!==s&&p.classList.remove("active")})}function l(){const s=this.dataset.id;f.forEach(p=>{p.dataset.id===s?p.classList.add("active"):p.classList.remove("active")})}});document.addEventListener("DOMContentLoaded",b=>{const a=document.querySelectorAll("[data-menu-open]"),f=document.querySelector(".menu-backdrop"),m=document.querySelector(".burger"),n=document.querySelector(".body");a.forEach(s=>{s.addEventListener("click",l)});function l(){f.classList.toggle("is-open"),m.classList.toggle("is-open"),n.classList.toggle("lock")}});new Swiper(".heroSwiper",{effect:"fade",centeredSlides:!0,slidesPerView:"auto",allowTouchMove:!1,loop:!0,speed:2e3,autoplay:{delay:2e3}});document.addEventListener("DOMContentLoaded",b=>{const a=document.querySelectorAll(".form"),f=document.querySelectorAll("input, textarea"),m=document.querySelectorAll(".agree"),n=3,l="Минимум символа!",s="Заполните поле",p="Найдены цифры в имени!",T="Не верный формат E-mail!",k="Не верный формат телефона!",w="Минимальное к-во символов:",_="Максимальное к-во символов:",x=document.querySelectorAll("[data-popup]"),N=document.querySelectorAll("[data-popup-close]"),C=document.querySelectorAll(".modal"),L=document.querySelector(".backdrop"),I=[].filter.call(document.all,t=>getComputedStyle(t).position=="fixed"),h=document.querySelector(".body");let S=window.innerWidth-document.querySelector(".main").offsetWidth,v=["request","Заявка","Отправить заявку","Заполните форму и мы свяжемся <br>с вами в ближайшее время.","Отправить"];window.addEventListener("resize",H);function H(){S=window.innerWidth-document.querySelector(".main").offsetWidth}f.forEach(t=>{let o=t.closest(".label");(t.type==="checkbox"||t.type==="radio")&&(o=t.closest(".fieldset")),t.addEventListener("focus",function(){o.querySelectorAll(".red").forEach(r=>{r.classList.remove("red"),r.closest(".label").querySelector(".label__error")!==null&&(r.closest(".label").querySelector(".label__error").classList.remove("active"),setTimeout(function(){r.closest(".label").querySelector(".label__error").remove()},250))})}),t.addEventListener("blur",function(){this.value!==""&&E(o)===!0&&this.classList.add("valid")})}),m.forEach(t=>{t.addEventListener("change",function(){let o=!0,e=this.closest(".form").querySelectorAll(".agree"),r=e.length,c=0;e.forEach(u=>{u.checked&&c++}),r==c&&(o=!1),this.closest(".form").querySelector("[type=submit]").disabled=o})}),a.forEach(t=>{t.addEventListener("submit",async function(o){if(o.preventDefault(),E(this)!=!1){g("loading");const r=new FormData(this);let c={};r.forEach((i,d)=>c[d]=i);let u=JSON.stringify(c);setTimeout(function(){g("ok"),q(),console.log(u)},1500)}return!1})});function E(t){let o=!0;return t.querySelectorAll("[required]").forEach(e=>{let r=e.parentNode;if(e.value.length===0)c(r,s);else if(e.value.length<n&&e.type!=="number"){let i=l.split(" ");c(r,i[0]+" "+n+" "+i[1])}else e.name=="name"&&/[^A-zА-яЁё\+ ()\-]/.test(e.value)&&c(r,p),e.type=="email"&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e.value)&&c(r,T),e.type=="tel"&&/[^0-9\+ ()\-]/.test(e.value)&&c(r,k),e.type=="number"&&(e.min&&Number(e.value)<Number(e.min)&&c(r,w+" "+e.min),e.max&&Number(e.value)>Number(e.max)&&c(r,_+" "+e.max));if(e.type=="checkbox"&&!e.checked&&u(),e.type=="radio"&&!e.checked){const i=t.querySelectorAll('[name="'+e.name+'"]');let d=!1;for(let y=0;y<i.length;y++)if(i[y].checked===!0){d=!0;break}d===!1&&u()}function c(i,d){i.querySelectorAll(".label__error").length<1&&(i.insertAdjacentHTML("beforeend",'<div class="label__error">'+d+"</div>"),setTimeout(function(){i.querySelector(".label__error").classList.add("active")},5)),u()}function u(){e.classList.add("red"),o=!1}}),o}function q(){a.forEach(t=>{t.reset(),t.querySelectorAll(".label__error").forEach(o=>{o.classList.remove("active"),setTimeout(function(){o.remove()},250)}),t.querySelectorAll("[required]").forEach(o=>{o.classList.remove("red"),o.classList.remove("valid")}),t.querySelectorAll(".agree").length>0&&(t.querySelector("[type=submit]").disabled=!0)})}x.forEach(t=>{t.addEventListener("click",function(o){o.preventDefault();let e=this.dataset.popup.split("|");g(e[0],e[1],e[2],e[3],e[4])})}),N.forEach(t=>{t.addEventListener("click",O)});function g(t,o,e,r,c){let u=0;if(A(),L.classList.contains("is-hidden")&&(L.classList.remove("is-hidden"),M()),t=="request"){const i=document.querySelector("#request .subject"),d=document.querySelector("#request .popup-title"),y=document.querySelector("#request .popup-subtitle"),P=document.querySelector('#request .button[type="submit"]');i!==null&&(o!=null?document.querySelector("#request .subject").value=o:document.querySelector("#request .subject").value=v[1]),d!==null&&(e!=null?document.querySelector("#request .popup-title").innerHTML=e:document.querySelector("#request .popup-title").innerHTML=v[2]),y!==null&&(r!=null?document.querySelector("#request .popup-subtitle").innerHTML=r:document.querySelector("#request .popup-subtitle").innerHTML=v[3]),P!==null&&(c!=null?document.querySelector('#request .button[type="submit"]').innerHTML=c:document.querySelector('#request .button[type="submit"]').innerHTML=v[4])}else if(t=="video"&&o!=""){document.getElementById("loading").classList.remove("is-hidden"),u=1e3;let i=o.split("/");const d=i.length-1,y=`<iframe src='https://player.vimeo.com/video/${i[d]}' frameborder='0' allowfullscreen></iframe>`;document.querySelector(".vimeoIframe").insertAdjacentHTML("beforeend",y)}setTimeout(function(){document.getElementById(t).classList.remove("is-hidden")},u)}function A(){document.querySelector(".vimeoIframe").innerHTML="",C.forEach(t=>{t.classList.add("is-hidden"),setTimeout(function(){t.scrollTo({top:0,left:0,behavior:"auto"})},300)})}function O(){A(),L.classList.add("is-hidden"),setTimeout(function(){M(),q()},300)}function M(){h.classList.toggle("lock"),I.forEach(t=>{h.classList.contains("lock")?(h.style.paddingRight=S+"px",t.style.paddingRight=S+"px"):(h.style.paddingRight="0px",t.style.paddingRight="0px")})}});
