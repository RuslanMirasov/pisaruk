(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const A=document.querySelector(".preloader");window.addEventListener("load",T);function T(){setTimeout(function(){A.classList.add("is--hidden")},400)}const k=document.querySelectorAll(".js-film-hover"),b=document.querySelectorAll(".poster");k.forEach(e=>{e.addEventListener("mouseover",y),e.addEventListener("mouseout",p),e.addEventListener("touchstart",y),e.addEventListener("touchend",p)});function p(){b.forEach(e=>{e.classList.remove("active")})}function y(){const e=this.dataset.id;b.forEach(r=>{r.dataset.id===e&&r.classList.add("active")})}const w=document.querySelectorAll("[data-menu-open]"),M=document.querySelector(".menu-backdrop"),_=document.querySelector(".burger"),x=document.querySelector(".body");w.forEach(e=>{e.addEventListener("click",N)});function N(){M.classList.toggle("is-open"),_.classList.toggle("is-open"),x.classList.toggle("lock")}new Swiper(".heroSwiper",{effect:"fade",centeredSlides:!0,slidesPerView:"auto",allowTouchMove:!1,loop:!0,speed:2e3,autoplay:{delay:5e3}});const v=document.querySelectorAll(".form"),H=document.querySelectorAll("input, textarea"),I=document.querySelectorAll(".agree"),h=3,P="Минимум символа!",C="Заполните поле",z="Найдены цифры в имени!",B="Не верный формат E-mail!",O="Не верный формат телефона!",W="Минимальное к-во символов:",j="Максимальное к-во символов:",D=document.querySelectorAll("[data-popup]"),R=document.querySelectorAll("[data-popup-close]"),F=document.querySelectorAll(".modal"),d=document.querySelector(".backdrop"),$=[].filter.call(document.all,e=>getComputedStyle(e).position=="fixed"),u=document.querySelector(".body");let f=window.innerWidth-document.querySelector(".main").offsetWidth,a=["request","Заявка","Отправить заявку","Заполните форму и мы свяжемся <br>с вами в ближайшее время.","Отправить"];window.addEventListener("resize",J);function J(){f=window.innerWidth-document.querySelector(".main").offsetWidth}H.forEach(e=>{let r=e.closest(".label");(e.type==="checkbox"||e.type==="radio")&&(r=e.closest(".fieldset")),e.addEventListener("focus",function(){r.querySelectorAll(".red").forEach(l=>{l.classList.remove("red"),l.closest(".label").querySelector(".label__error")!==null&&(l.closest(".label").querySelector(".label__error").classList.remove("active"),setTimeout(function(){l.closest(".label").querySelector(".label__error").remove()},250))})}),e.addEventListener("blur",function(){this.value!==""&&S(r)===!0&&this.classList.add("valid")})});I.forEach(e=>{e.addEventListener("change",function(){let r=!0,t=this.closest(".form").querySelectorAll(".agree"),l=t.length,o=0;t.forEach(n=>{n.checked&&o++}),l==o&&(r=!1),this.closest(".form").querySelector("[type=submit]").disabled=r})});v.forEach(e=>{e.addEventListener("submit",async function(r){if(r.preventDefault(),S(this)!=!1){m("loading");const l=new FormData(this);let o={};l.forEach((s,c)=>o[c]=s);let n=JSON.stringify(o);setTimeout(function(){m("ok"),g(),console.log(n)},1500)}return!1})});function S(e){let r=!0;return e.querySelectorAll("[required]").forEach(t=>{let l=t.parentNode;if(t.value.length===0)o(l,C);else if(t.value.length<h&&t.type!=="number"){let s=P.split(" ");o(l,s[0]+" "+h+" "+s[1])}else t.name=="name"&&/[^A-zА-яЁё\+ ()\-]/.test(t.value)&&o(l,z),t.type=="email"&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(t.value)&&o(l,B),t.type=="tel"&&/[^0-9\+ ()\-]/.test(t.value)&&o(l,O),t.type=="number"&&(t.min&&Number(t.value)<Number(t.min)&&o(l,W+" "+t.min),t.max&&Number(t.value)>Number(t.max)&&o(l,j+" "+t.max));if(t.type=="checkbox"&&!t.checked&&n(),t.type=="radio"&&!t.checked){const s=e.querySelectorAll('[name="'+t.name+'"]');let c=!1;for(let i=0;i<s.length;i++)if(s[i].checked===!0){c=!0;break}c===!1&&n()}function o(s,c){s.querySelectorAll(".label__error").length<1&&(s.insertAdjacentHTML("beforeend",'<div class="label__error">'+c+"</div>"),setTimeout(function(){s.querySelector(".label__error").classList.add("active")},5)),n()}function n(){t.classList.add("red"),r=!1}}),r}function g(){v.forEach(e=>{e.reset(),e.querySelectorAll(".label__error").forEach(r=>{r.classList.remove("active"),setTimeout(function(){r.remove()},250)}),e.querySelectorAll("[required]").forEach(r=>{r.classList.remove("red"),r.classList.remove("valid")}),e.querySelectorAll(".agree").length>0&&(e.querySelector("[type=submit]").disabled=!0)})}D.forEach(e=>{e.addEventListener("click",function(r){r.preventDefault();let t=this.dataset.popup.split("|");m(t[0],t[1],t[2],t[3],t[4])})});R.forEach(e=>{e.addEventListener("click",K)});function m(e,r,t,l,o){let n=0;if(L(),d.classList.contains("is-hidden")&&(d.classList.remove("is-hidden"),E()),e=="request"){const s=document.querySelector("#request .subject"),c=document.querySelector("#request .popup-title"),i=document.querySelector("#request .popup-subtitle"),q=document.querySelector('#request .button[type="submit"]');s!==null&&(r!=null?document.querySelector("#request .subject").value=r:document.querySelector("#request .subject").value=a[1]),c!==null&&(t!=null?document.querySelector("#request .popup-title").innerHTML=t:document.querySelector("#request .popup-title").innerHTML=a[2]),i!==null&&(l!=null?document.querySelector("#request .popup-subtitle").innerHTML=l:document.querySelector("#request .popup-subtitle").innerHTML=a[3]),q!==null&&(o!=null?document.querySelector('#request .button[type="submit"]').innerHTML=o:document.querySelector('#request .button[type="submit"]').innerHTML=a[4])}else if(e=="video"&&r!=""){document.getElementById("loading").classList.remove("is-hidden"),n=1e3;let s=r.split("/");const c=s.length-1,i=`<iframe src='https://player.vimeo.com/video/${s[c]}' frameborder='0' allowfullscreen></iframe>`;document.querySelector(".vimeoIframe").insertAdjacentHTML("beforeend",i)}setTimeout(function(){document.getElementById(e).classList.remove("is-hidden")},n)}function L(){document.querySelector(".vimeoIframe").innerHTML="",F.forEach(e=>{e.classList.add("is-hidden"),setTimeout(function(){e.scrollTo({top:0,left:0,behavior:"auto"})},300)})}function K(){L(),d.classList.add("is-hidden"),setTimeout(function(){E(),g()},300)}function E(){u.classList.toggle("lock"),$.forEach(e=>{u.classList.contains("lock")?(u.style.paddingRight=f+"px",e.style.paddingRight=f+"px"):(u.style.paddingRight="0px",e.style.paddingRight="0px")})}
